<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MavenDistributionManagement.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Spring Initializr :: Generator</a> &gt; <a href="index.source.html" class="el_package">io.spring.initializr.generator.buildsystem.maven</a> &gt; <span class="el_source">MavenDistributionManagement.java</span></div><h1>MavenDistributionManagement.java</h1><pre class="source lang-java linenums">/*
 * Copyright 2012-2019 the original author or authors.
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package io.spring.initializr.generator.buildsystem.maven;

import java.util.function.Consumer;

/**
 * Maven {@code &lt;distributionManagement&gt;} section.
 *
 * @author Joachim Pasquali
 * @author Stephane Nicoll
 */
public class MavenDistributionManagement {

	private final String downloadUrl;

	private final DeploymentRepository repository;

	private final DeploymentRepository snapshotRepository;

	private final Site site;

	private final Relocation relocation;

<span class="fc" id="L39">	MavenDistributionManagement(Builder builder) {</span>
<span class="fc" id="L40">		this.downloadUrl = builder.downloadUrl;</span>
<span class="fc" id="L41">		this.repository = builder.repository.build();</span>
<span class="fc" id="L42">		this.snapshotRepository = builder.snapshotRepository.build();</span>
<span class="fc" id="L43">		this.site = builder.site.build();</span>
<span class="fc" id="L44">		this.relocation = builder.relocation.build();</span>
<span class="fc" id="L45">	}</span>

	/**
	 * Returns whether this instance is empty.
	 * @return whether this instance is empty
	 */
	public boolean isEmpty() {
<span class="fc bfc" id="L52" title="All 6 branches covered.">		return this.downloadUrl == null &amp;&amp; this.repository.isEmpty() &amp;&amp; this.snapshotRepository.isEmpty()</span>
<span class="fc bfc" id="L53" title="All 4 branches covered.">				&amp;&amp; this.site.isEmpty() &amp;&amp; this.relocation.isEmpty();</span>
	}

	/**
	 * Return the URL where this project can be downloaded from.
	 * @return the URL of the project's download page
	 */
	public String getDownloadUrl() {
<span class="fc" id="L61">		return this.downloadUrl;</span>
	}

	/**
	 * Return the information needed to deploy the artifacts generated by the project to a
	 * remote repository.
	 * @return the {@link DeploymentRepository} for released artifacts
	 */
	public DeploymentRepository getRepository() {
<span class="fc" id="L70">		return this.repository;</span>
	}

	/**
	 * Return the information needed to deploy the snapshot artifacts generated by the
	 * project to a remote repository.
	 * @return the {@link DeploymentRepository} for snapshot artifacts
	 */
	public DeploymentRepository getSnapshotRepository() {
<span class="fc" id="L79">		return this.snapshotRepository;</span>
	}

	/**
	 * Return the information needed for deploying the web site of the project.
	 * @return the {@link Site}
	 */
	public Site getSite() {
<span class="fc" id="L87">		return this.site;</span>
	}

	/**
	 * Return the relocation information of the artifact if it has been moved to a new
	 * groupId and/or artifactId.
	 * @return the {@link Relocation}
	 */
	public Relocation getRelocation() {
<span class="fc" id="L96">		return this.relocation;</span>
	}

	/**
	 * Builder for {@link MavenDistributionManagement}.
	 */
<span class="fc" id="L102">	public static class Builder {</span>

		private String downloadUrl;

<span class="fc" id="L106">		private final DeploymentRepository.Builder repository = new DeploymentRepository.Builder();</span>

<span class="fc" id="L108">		private final DeploymentRepository.Builder snapshotRepository = new DeploymentRepository.Builder();</span>

<span class="fc" id="L110">		private final Site.Builder site = new Site.Builder();</span>

<span class="fc" id="L112">		private final Relocation.Builder relocation = new Relocation.Builder();</span>

		/**
		 * Specify the URL where this project can be downloaded from.
		 * @param downloadUrl the URL of the project's download page
		 * @return this for method chaining
		 */
		public Builder downloadUrl(String downloadUrl) {
<span class="fc" id="L120">			this.downloadUrl = downloadUrl;</span>
<span class="fc" id="L121">			return this;</span>
		}

		/**
		 * Customize the {@code repository} using the specified consumer.
		 * @param repository a consumer of the current repository
		 * @return this for method chaining
		 */
		public Builder repository(Consumer&lt;DeploymentRepository.Builder&gt; repository) {
<span class="fc" id="L130">			repository.accept(this.repository);</span>
<span class="fc" id="L131">			return this;</span>
		}

		/**
		 * Customize the {@code snapshotRepository} using the specified consumer.
		 * @param snapshotRepository a consumer of the current snapshot repository
		 * @return this for method chaining
		 */
		public Builder snapshotRepository(Consumer&lt;DeploymentRepository.Builder&gt; snapshotRepository) {
<span class="fc" id="L140">			snapshotRepository.accept(this.snapshotRepository);</span>
<span class="fc" id="L141">			return this;</span>
		}

		/**
		 * Customize the {@code site} using the specified consumer.
		 * @param site a consumer of the current site
		 * @return this for method chaining
		 */
		public Builder site(Consumer&lt;Site.Builder&gt; site) {
<span class="fc" id="L150">			site.accept(this.site);</span>
<span class="fc" id="L151">			return this;</span>
		}

		/**
		 * Customize the {@code relocation} using the specified consumer.
		 * @param relocation a consumer of the current relocation
		 * @return this for method chaining
		 */
		public Builder relocation(Consumer&lt;Relocation.Builder&gt; relocation) {
<span class="fc" id="L160">			relocation.accept(this.relocation);</span>
<span class="fc" id="L161">			return this;</span>
		}

		/**
		 * Build a {@link MavenDistributionManagement} with the current state of this
		 * builder.
		 * @return a {@link MavenDistributionManagement}
		 */
		public MavenDistributionManagement build() {
<span class="fc" id="L170">			return new MavenDistributionManagement(this);</span>
		}

	}

	/**
	 * Describe where to deploy artifacts.
	 */
	public static class DeploymentRepository {

		private final String id;

		private final String name;

		private final String url;

		private final String layout;

		private final Boolean uniqueVersion;

<span class="fc" id="L190">		DeploymentRepository(Builder builder) {</span>
<span class="fc" id="L191">			this.id = builder.id;</span>
<span class="fc" id="L192">			this.name = builder.name;</span>
<span class="fc" id="L193">			this.url = builder.url;</span>
<span class="fc" id="L194">			this.layout = builder.layout;</span>
<span class="fc" id="L195">			this.uniqueVersion = builder.uniqueVersion;</span>
<span class="fc" id="L196">		}</span>

		/**
		 * Returns whether this instance is empty.
		 * @return whether this instance is empty
		 */
		public boolean isEmpty() {
<span class="pc bpc" id="L203" title="4 of 10 branches missed.">			return this.id == null &amp;&amp; this.name == null &amp;&amp; this.url == null &amp;&amp; this.layout == null</span>
					&amp;&amp; this.uniqueVersion == null;
		}

		/**
		 * Return the identifier of the repository.
		 * @return the repository ID
		 */
		public String getId() {
<span class="fc" id="L212">			return this.id;</span>
		}

		/**
		 * Return the name of the repository.
		 * @return the repository name
		 */
		public String getName() {
<span class="fc" id="L220">			return this.name;</span>
		}

		/**
		 * Return the url of the repository to use to upload artifacts.
		 * @return the repository url
		 */
		public String getUrl() {
<span class="fc" id="L228">			return this.url;</span>
		}

		/**
		 * Return the repository layout. Can be {@code default} or {@code legacy}.
		 * @return the repository layout
		 */
		public String getLayout() {
<span class="fc" id="L236">			return this.layout;</span>
		}

		/**
		 * Return whether to assign snapshots a unique version comprised of the timestamp
		 * and build number, or to use the same version each time.
		 * @return {@code true} to assign each snapshot a unique version
		 */
		public Boolean getUniqueVersion() {
<span class="fc" id="L245">			return this.uniqueVersion;</span>
		}

		/**
		 * Builder for {@link DeploymentRepository}.
		 */
<span class="fc" id="L251">		public static class Builder {</span>

			private String id;

			private String name;

			private String url;

			private String layout;

			private Boolean uniqueVersion;

			/**
			 * Set the id of the repository.
			 * @param id the identifier
			 * @return this for method chaining
			 */
			public Builder id(String id) {
<span class="fc" id="L269">				this.id = id;</span>
<span class="fc" id="L270">				return this;</span>
			}

			/**
			 * Set the name of the repository.
			 * @param name the name
			 * @return this for method chaining
			 */
			public Builder name(String name) {
<span class="fc" id="L279">				this.name = name;</span>
<span class="fc" id="L280">				return this;</span>
			}

			/**
			 * Set the url of the repository to use to upload artifacts. Specify both the
			 * location and the transport protocol used to transfer a built artifact to
			 * the repository.
			 * @param url the url
			 * @return this for method chaining
			 */
			public Builder url(String url) {
<span class="fc" id="L291">				this.url = url;</span>
<span class="fc" id="L292">				return this;</span>
			}

			/**
			 * Set the repository layout, can be {@code default} or {@code legacy}.
			 * @param layout the layout
			 * @return this for method chaining
			 */
			public Builder layout(String layout) {
<span class="fc" id="L301">				this.layout = layout;</span>
<span class="fc" id="L302">				return this;</span>
			}

			/**
			 * Set whether snapshots should be assigned a unique version comprised of the
			 * timestamp and build number.
			 * @param uniqueVersion {@code true} to use unique version for snapshots
			 * @return this for method chaining
			 */
			public Builder uniqueVersion(Boolean uniqueVersion) {
<span class="fc" id="L312">				this.uniqueVersion = uniqueVersion;</span>
<span class="fc" id="L313">				return this;</span>
			}

			/**
			 * Build a {@link DeploymentRepository} with the current state of this
			 * builder.
			 * @return a {@link DeploymentRepository}
			 */
			public DeploymentRepository build() {
<span class="fc" id="L322">				return new DeploymentRepository(this);</span>
			}

		}

	}

	/**
	 * Information needed for deploying the web site of the project.
	 */
	public static class Site {

		private final String id;

		private final String name;

		private final String url;

<span class="fc" id="L340">		Site(Builder builder) {</span>
<span class="fc" id="L341">			this.id = builder.id;</span>
<span class="fc" id="L342">			this.name = builder.name;</span>
<span class="fc" id="L343">			this.url = builder.url;</span>
<span class="fc" id="L344">		}</span>

		/**
		 * Returns whether this instance is empty.
		 * @return whether this instance is empty
		 */
		public boolean isEmpty() {
<span class="pc bpc" id="L351" title="2 of 6 branches missed.">			return this.id == null &amp;&amp; this.name == null &amp;&amp; this.url == null;</span>
		}

		/**
		 * Return the identifier of the repository.
		 * @return the repository ID
		 */
		public String getId() {
<span class="fc" id="L359">			return this.id;</span>
		}

		/**
		 * Return the name of the repository.
		 * @return the repository name
		 */
		public String getName() {
<span class="fc" id="L367">			return this.name;</span>
		}

		/**
		 * Return the url of the repository to use to upload the site.
		 * @return the repository url
		 */
		public String getUrl() {
<span class="fc" id="L375">			return this.url;</span>
		}

		/**
		 * Builder for {@link Site}.
		 */
<span class="fc" id="L381">		public static class Builder {</span>

			private String id;

			private String name;

			private String url;

			/**
			 * Set the id of the repository.
			 * @param id the identifier
			 * @return this for method chaining
			 */
			public Builder id(String id) {
<span class="fc" id="L395">				this.id = id;</span>
<span class="fc" id="L396">				return this;</span>
			}

			/**
			 * Set the name of the repository.
			 * @param name the name
			 * @return this for method chaining
			 */
			public Builder name(String name) {
<span class="fc" id="L405">				this.name = name;</span>
<span class="fc" id="L406">				return this;</span>
			}

			/**
			 * Set the url of the repository to use to upload the site. Specify both the
			 * location and the transport protocol to use.
			 * @param url the url
			 * @return this for method chaining
			 */
			public Builder url(String url) {
<span class="fc" id="L416">				this.url = url;</span>
<span class="fc" id="L417">				return this;</span>
			}

			/**
			 * Build a {@link Site} with the current state of this builder.
			 * @return a {@link Site}
			 */
			public Site build() {
<span class="fc" id="L425">				return new Site(this);</span>
			}

		}

	}

	/**
	 * Relocation information of the artifact if it has been moved to a new groupId and/or
	 * artifactId.
	 */
	public static class Relocation {

		private final String groupId;

		private final String artifactId;

		private final String version;

		private final String message;

<span class="fc" id="L446">		Relocation(Builder builder) {</span>
<span class="fc" id="L447">			this.groupId = builder.groupId;</span>
<span class="fc" id="L448">			this.artifactId = builder.artifactId;</span>
<span class="fc" id="L449">			this.version = builder.version;</span>
<span class="fc" id="L450">			this.message = builder.message;</span>
<span class="fc" id="L451">		}</span>

		/**
		 * Returns whether this instance is empty.
		 * @return whether this instance is empty
		 */
		public boolean isEmpty() {
<span class="pc bpc" id="L458" title="3 of 8 branches missed.">			return this.groupId == null &amp;&amp; this.artifactId == null &amp;&amp; this.version == null &amp;&amp; this.message == null;</span>
		}

		/**
		 * Return the new group ID of the dependency.
		 * @return the relocated group ID
		 */
		public String getGroupId() {
<span class="fc" id="L466">			return this.groupId;</span>
		}

		/**
		 * Return the new artifact ID of the dependency.
		 * @return the relocated artifact ID
		 */
		public String getArtifactId() {
<span class="fc" id="L474">			return this.artifactId;</span>
		}

		/**
		 * Return the new version of the dependency.
		 * @return the relocated version
		 */
		public String getVersion() {
<span class="fc" id="L482">			return this.version;</span>
		}

		/**
		 * Return a message that provides more details about the relocation.
		 * @return the relocation message
		 */
		public String getMessage() {
<span class="fc" id="L490">			return this.message;</span>
		}

		/**
		 * Builder for {@link Relocation}.
		 */
<span class="fc" id="L496">		public static class Builder {</span>

			private String groupId;

			private String artifactId;

			private String version;

			private String message;

			/**
			 * Specify the new group ID of the dependency.
			 * @param groupId the new group ID of the dependency
			 * @return this for method chaining
			 */
			public Builder groupId(String groupId) {
<span class="fc" id="L512">				this.groupId = groupId;</span>
<span class="fc" id="L513">				return this;</span>
			}

			/**
			 * Specify the new artifact ID of the dependency.
			 * @param artifactId the new artifact ID of the dependency
			 * @return this for method chaining
			 */
			public Builder artifactId(String artifactId) {
<span class="fc" id="L522">				this.artifactId = artifactId;</span>
<span class="fc" id="L523">				return this;</span>
			}

			/**
			 * Specify the new version of the dependency.
			 * @param version the new version of the dependency
			 * @return this for method chaining
			 */
			public Builder version(String version) {
<span class="fc" id="L532">				this.version = version;</span>
<span class="fc" id="L533">				return this;</span>
			}

			/**
			 * Specify a message that provides more details about the relocation.
			 * @param message the relocation message
			 * @return this for method chaining
			 */
			public Builder message(String message) {
<span class="fc" id="L542">				this.message = message;</span>
<span class="fc" id="L543">				return this;</span>
			}

			/**
			 * Build a {@link Relocation} with the current state of this builder.
			 * @return a {@link Relocation}
			 */
			public Relocation build() {
<span class="fc" id="L551">				return new Relocation(this);</span>
			}

		}

	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>