<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>MavenProfileActivation.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Spring Initializr :: Generator</a> &gt; <a href="index.source.html" class="el_package">io.spring.initializr.generator.buildsystem.maven</a> &gt; <span class="el_source">MavenProfileActivation.java</span></div><h1>MavenProfileActivation.java</h1><pre class="source lang-java linenums">/*
 * Copyright 2012-2020 the original author or authors.
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package io.spring.initializr.generator.buildsystem.maven;

/**
 * A {@link MavenProfile profile} activation in a {@link MavenBuild}.
 *
 * @author Stephane Nicoll
 */
public class MavenProfileActivation {

	private final Boolean activeByDefault;

	private final String jdk;

	private final Os os;

	private final Property property;

	private final File file;

	/**
	 * Creates a new instance.
	 * @param builder the builder to use
	 */
<span class="fc" id="L40">	protected MavenProfileActivation(Builder builder) {</span>
<span class="fc" id="L41">		this.activeByDefault = builder.activeByDefault;</span>
<span class="fc" id="L42">		this.jdk = builder.jdk;</span>
<span class="fc" id="L43">		this.os = builder.os;</span>
<span class="fc" id="L44">		this.property = builder.property;</span>
<span class="fc bfc" id="L45" title="All 4 branches covered.">		this.file = (builder.fileExists != null || builder.fileMissing != null)</span>
<span class="fc" id="L46">				? new File(builder.fileExists, builder.fileMissing) : null;</span>
<span class="fc" id="L47">	}</span>

	/**
	 * Specify if this activation has any non-default value.
	 * @return {@code true} if there are no non-default values
	 */
	public boolean isEmpty() {
<span class="pc bpc" id="L54" title="1 of 10 branches missed.">		return (this.activeByDefault == null &amp;&amp; this.jdk == null &amp;&amp; this.os == null &amp;&amp; this.property == null</span>
				&amp;&amp; this.file == null);
	}

	/**
	 * Specify if the profile should be activated by default, or {@code null} to use the
	 * default value.
	 * @return {@code true} to active the profile if no other profile is active
	 */
	public Boolean getActiveByDefault() {
<span class="fc" id="L64">		return this.activeByDefault;</span>
	}

	/**
	 * Specify the JDK(s) that should match for the profile to be activated, or
	 * {@code null} to not enable the profile based on the JDK.
	 * @return the jdk (or jdks range) that should match or {@code null}
	 */
	public String getJdk() {
<span class="fc" id="L73">		return this.jdk;</span>
	}

	/**
	 * Return the operating system activation settings, or {@code null} to not enable the
	 * profile based on the OS.
	 * @return the operating system activation settings or {@code null}
	 */
	public Os getOs() {
<span class="fc" id="L82">		return this.os;</span>
	}

	/**
	 * Return the property to match to enable the profile, or {@code null} to not enable
	 * the profile based on a property.
	 * @return the property to match or {@code null}
	 */
	public Property getProperty() {
<span class="fc" id="L91">		return this.property;</span>
	}

	/**
	 * Return the file activation settings, or {@code null} to not enable the profile
	 * based on the presence or absence of a file.
	 * @return the file activation settings or {@code null}
	 */
	public File getFile() {
<span class="fc" id="L100">		return this.file;</span>
	}

	/**
	 * Operating System activation settings.
	 */
	public static final class Os {

		private final String name;

		private final String family;

		private final String arch;

		private final String version;

<span class="fc" id="L116">		Os(String name, String family, String arch, String version) {</span>
<span class="fc" id="L117">			this.name = name;</span>
<span class="fc" id="L118">			this.family = family;</span>
<span class="fc" id="L119">			this.arch = arch;</span>
<span class="fc" id="L120">			this.version = version;</span>
<span class="fc" id="L121">		}</span>

		/**
		 * Return the name of the OS to match or {@code null}.
		 * @return the name of the OS
		 */
		public String getName() {
<span class="fc" id="L128">			return this.name;</span>
		}

		/**
		 * Return the family of OS to match or {@code null}. Can be for instance
		 * {@code mac}, {@code windows}, {@code unix}, {@code os/400}, etc.
		 * @return the family of OS
		 */
		public String getFamily() {
<span class="fc" id="L137">			return this.family;</span>
		}

		/**
		 * Return the cpu architecture of the OS to match or {@code null}.
		 * @return the cpu architecture of the OS
		 */
		public String getArch() {
<span class="fc" id="L145">			return this.arch;</span>
		}

		/**
		 * Return the version of the OS to match or {@code null}.
		 * @return the version of the OS
		 */
		public String getVersion() {
<span class="fc" id="L153">			return this.version;</span>
		}

	}

	/**
	 * Property activation settings.
	 */
	public static final class Property {

		private final String name;

		private final String value;

<span class="fc" id="L167">		Property(String name, String value) {</span>
<span class="fc" id="L168">			this.name = name;</span>
<span class="fc" id="L169">			this.value = value;</span>
<span class="fc" id="L170">		}</span>

		/**
		 * Return the name of the property.
		 * @return the property name
		 */
		public String getName() {
<span class="fc" id="L177">			return this.name;</span>
		}

		/**
		 * Return the value of the property.
		 * @return the property value
		 */
		public String getValue() {
<span class="fc" id="L185">			return this.value;</span>
		}

	}

	/**
	 * File activation settings.
	 */
	public static final class File {

		private final String exists;

		private final String missing;

<span class="fc" id="L199">		File(String exists, String missing) {</span>
<span class="fc" id="L200">			this.missing = missing;</span>
<span class="fc" id="L201">			this.exists = exists;</span>
<span class="fc" id="L202">		}</span>

		/**
		 * Return the file that should exists for the profile to match or {@code null}.
		 * @return the file that should exist
		 */
		public String getExists() {
<span class="fc" id="L209">			return this.exists;</span>
		}

		/**
		 * Return the file that should be missing for the profile to match or
		 * {@code null}.
		 * @return the file that should be missing
		 */
		public String getMissing() {
<span class="fc" id="L218">			return this.missing;</span>
		}

	}

	/**
	 * Builder for {@link MavenProfileActivation}.
	 */
	public static class Builder {

		private Boolean activeByDefault;

		private String jdk;

		private Os os;

		private Property property;

		private String fileExists;

		private String fileMissing;

		/**
		 * Creates a new instance.
		 */
<span class="fc" id="L243">		protected Builder() {</span>
<span class="fc" id="L244">		}</span>

		/**
		 * Specify if the profile should be enabled if no profile is active.
		 * @param activeByDefault whether to enable the profile is no profile is active
		 * @return this for method chaining
		 */
		public Builder activeByDefault(Boolean activeByDefault) {
<span class="fc" id="L252">			this.activeByDefault = activeByDefault;</span>
<span class="fc" id="L253">			return this;</span>
		}

		/**
		 * Specify the JDK(s) to match to enable the profile. Can be a JDK value or an
		 * OSGi range.
		 * @param jdk the jdk (or JDKs range) to match
		 * @return this for method chaining
		 */
		public Builder jdk(String jdk) {
<span class="fc" id="L263">			this.jdk = jdk;</span>
<span class="fc" id="L264">			return this;</span>
		}

		/**
		 * Specify the OS to match to enable the profile.
		 * @param name the name of the OS
		 * @param family the family os OS
		 * @param arch the cpu architecture
		 * @param version the version of the OS
		 * @return this for method chaining
		 */
		public Builder os(String name, String family, String arch, String version) {
<span class="pc bpc" id="L276" title="3 of 8 branches missed.">			if (name == null &amp;&amp; family == null &amp;&amp; arch == null &amp;&amp; version == null) {</span>
<span class="fc" id="L277">				this.os = null;</span>
			}
			else {
<span class="fc" id="L280">				this.os = new Os(name, family, arch, version);</span>
			}
<span class="fc" id="L282">			return this;</span>
		}

		/**
		 * Specify the property to match to enable the profile.
		 * @param name the name of the property
		 * @param value the value of the property
		 * @return this for method chaining
		 */
		public Builder property(String name, String value) {
<span class="fc bfc" id="L292" title="All 2 branches covered.">			if (name == null) {</span>
<span class="fc" id="L293">				this.property = null;</span>
			}
			else {
<span class="fc" id="L296">				this.property = new Property(name, value);</span>
			}
<span class="fc" id="L298">			return this;</span>
		}

		/**
		 * Specify the file that should exist to enable the profile.
		 * @param existingFile the file that should exist
		 * @return this for method chaining
		 */
		public Builder fileExists(String existingFile) {
<span class="fc" id="L307">			this.fileExists = existingFile;</span>
<span class="fc" id="L308">			return this;</span>
		}

		/**
		 * Specify the file that should be missing to enable the profile.
		 * @param missingFile the file that should be missing
		 * @return this for method chaining
		 */
		public Builder fileMissing(String missingFile) {
<span class="fc" id="L317">			this.fileMissing = missingFile;</span>
<span class="fc" id="L318">			return this;</span>
		}

		/**
		 * Create a {@link MavenProfileActivation} with the current state of this builder.
		 * @return a {@link MavenProfileActivation}.
		 */
		public MavenProfileActivation build() {
<span class="fc" id="L326">			return new MavenProfileActivation(this);</span>
		}

	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>